
CREATE SCHEMA job_task;

SET search_path TO job_task;


--DROP TABLE TASK_TYPE CASCADE; 


--DROP TABLE TASK CASCADE; 



 
CREATE TABLE TASK_TYPE ( 
  NAME CHAR(40) NOT NULL, 
  DESCRIPTION VARCHAR(220) NOT NULL, 
  INPUT_SCHEMA JSONB NULL, 
  OUTPUT_SCHEMA JSONB NULL 
); 
ALTER TABLE TASK_TYPE ADD CONSTRAINT TASK_TYPE_PK PRIMARY KEY (NAME); 
 


 
CREATE TABLE TASK ( 
  UUID uuid NOT NULL, 
  TASK_TYPE_NAME CHAR(40) NOT NULL, 
  INPUT JSONB NULL, 
  OUTPUT JSONB NULL, 
  HISTORY JSONB NULL, 
  START_TIME TIMESTAMP NOT NULL, 
  END_TIME TIMESTAMP NULL, 
  ERROR VARCHAR(220) NULL, 
  FINISH CHAR(1) NULL, 
  CREATED_TIME TIMESTAMP NULL 
); 
ALTER TABLE TASK ADD CONSTRAINT TASK_PK PRIMARY KEY (UUID); 
 
CREATE INDEX TASK_TASK_TYPE_NAME_FK ON TASK (TASK_TYPE_NAME); 
 






 
ALTER TABLE TASK ADD CONSTRAINT TASK_TYPE_REL FOREIGN KEY (TASK_TYPE_NAME) REFERENCES TASK_TYPE(NAME);
 



















































 

-- End of generated script 











